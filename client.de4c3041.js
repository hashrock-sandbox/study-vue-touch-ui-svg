webpackJsonp([0],[,,,function(t,e,i){t.exports=i(4)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(0),n=i(8),r=i(20);new s.a({store:r.a,el:"#app",render:function(t){return t(n.a)}})},,,,function(t,e,i){"use strict";function s(t){i(9)}var n=i(10),r=i(19),o=i(1),a=s,d=o(n.a,r.a,!1,a,null,null);e.a=d.exports},function(t,e){},function(t,e,i){"use strict";var s=i(0),n=i(11);e.a=s.a.extend({computed:{editing:function(){return this.$store.state.editing},selectedItem:function(){return this.$store.state.items[this.$store.state.selectedIndex]},styleObj:function(){var t=this.selectedItem;return this.selectedItem?{top:t.y+"px",left:t.x+"px",width:t.w+"px",height:t.h+"px"}:{}},editingText:{get:function(){return this.$store.state.editingText},set:function(t){this.$store.commit("updateEditor",t)}}},methods:{editItem:function(){this.$store.commit("editItem",this.editingText)}},components:{FusenCanvas:n.a},watch:{editing:function(t){var e=this;t&&s.a.nextTick(function(){e.$el.querySelector(".editor__textarea").focus()})}}})},function(t,e,i){"use strict";function s(t){i(12)}var n=i(13),r=i(18),o=i(1),a=s,d=o(n.a,r.a,!1,a,null,null);e.a=d.exports},function(t,e){},function(t,e,i){"use strict";var s=i(0),n=i(14);e.a=s.a.extend({data:function(){return{dragging:"none",dragOffset:{x:0,y:0}}},computed:{selectedItem:function(){return this.$store.state.items[this.$store.state.selectedIndex]},items:function(){return this.$store.state.items}},methods:{startDrag:function(t){var e=t[0],i=t[1];this.dragging="move",this.$store.commit("selectItem",i),this.dragOffset.x=e.offsetX-this.selectedItem.x,this.dragOffset.y=e.offsetY-this.selectedItem.y,e.offsetX-this.selectedItem.x>this.selectedItem.w-20&&(this.dragging="resize-x"),e.offsetY-this.selectedItem.y>this.selectedItem.h-20&&(this.dragging="resize-y")},onDrag:function(t){"move"===this.dragging&&this.$store.commit("moveItem",{x:8*Math.round((t.offsetX-this.dragOffset.x)/8),y:8*Math.round((t.offsetY-this.dragOffset.y)/8)}),"resize-x"===this.dragging&&this.$store.commit("resizeItem",{w:8*Math.round((t.offsetX-this.selectedItem.x)/8),h:this.selectedItem.h}),"resize-y"===this.dragging&&this.$store.commit("resizeItem",{w:this.selectedItem.w,h:8*Math.round((t.offsetY-this.selectedItem.y)/8)})},stopDrag:function(){"none"!==this.dragging&&(this.dragging="none",this.$store.commit("selectItem",-1))},openEditor:function(t){this.$store.commit("openEditor",t)}},components:{FusenGroup:n.a}})},function(t,e,i){"use strict";function s(t){i(15)}var n=i(16),r=i(17),o=i(1),a=s,d=o(n.a,r.a,!1,a,null,null);e.a=d.exports},function(t,e){},function(t,e,i){"use strict";var s=i(0);e.a=s.a.extend({props:{item:Object,index:Number},methods:{startDrag:function(t){this.$emit("selected",[t,this.index])},openEditor:function(){this.$emit("open",this.index)}},computed:{toPosition:function(){return"translate("+this.item.x+", "+this.item.y+")"}}})},function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("g",{attrs:{transform:t.toPosition}},[i("rect",{staticClass:"item",attrs:{width:t.item.w,height:t.item.h,filter:"url(#drop-shadow)"},on:{pointerdown:function(e){t.startDrag(e)},dblclick:t.openEditor}}),t._v(" "),i("foreignObject",{attrs:{width:"300",height:"300",x:"0",y:"0"}},[i("div",{staticClass:"innerText",domProps:{textContent:t._s(t.item.text)}})])],1)},n=[],r={render:s,staticRenderFns:n};e.a=r},function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{attrs:{id:"canv",width:"800",height:"800"},on:{pointermove:t.onDrag,pointerup:t.stopDrag}},[i("filter",{attrs:{id:"drop-shadow",width:"150%",height:"150%"}},[i("feGaussianBlur",{attrs:{in:"SourceAlpha",result:"blur",stdDeviation:"2"}}),t._v(" "),i("feOffset",{attrs:{result:"offsetBlur",dx:"2",dy:"2"}}),t._v(" "),i("feBlend",{attrs:{in:"SourceGraphic",in2:"offsetBlur",mode:"normal"}})],1),t._v(" "),t._l(t.items,function(e,s){return i("fusen-group",{key:s,attrs:{index:s,item:e},on:{selected:t.startDrag,open:t.openEditor}})})],2)},n=[],r={render:s,staticRenderFns:n};e.a=r},function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("link",{attrs:{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0-beta/css/bootstrap-reboot.css"}}),t._v(" "),i("fusen-canvas"),t._v(" "),t.editing?i("div",{staticClass:"editor"},[i("div",{staticClass:"editor__frame",style:t.styleObj},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.editingText,expression:"editingText"}],staticClass:"editor__textarea",attrs:{autofocus:""},domProps:{value:t.editingText},on:{blur:t.editItem,input:function(e){e.target.composing||(t.editingText=e.target.value)}}})])]):t._e()],1)},n=[],r={render:s,staticRenderFns:n};e.a=r},function(t,e,i){"use strict";var s=i(0),n=i(21);s.a.use(n.a),e.a=new n.a.Store({state:{selectedIndex:-1,editingText:"",items:[{x:10,y:10,w:200,h:100,text:"Hello\nWorld"},{x:210,y:210,w:300,h:150,text:"はろー"}],editing:!1},mutations:{moveItem:function(t,e){t.items[t.selectedIndex].x=e.x,t.items[t.selectedIndex].y=e.y},resizeItem:function(t,e){t.items[t.selectedIndex].w=e.w,t.items[t.selectedIndex].h=e.h},selectItem:function(t,e){t.selectedIndex=e},openEditor:function(t,e){t.editing=!0,t.selectedIndex=e,t.editingText=t.items[e].text},editItem:function(t,e){t.items[t.selectedIndex].text=e,t.editingText="",t.editing=!1},updateEditor:function(t,e){t.editingText=e}}})}],[3]);
//# sourceMappingURL=client.de4c3041.js.map