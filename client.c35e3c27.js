webpackJsonp([0],[,,,function(t,e,i){t.exports=i(4)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(0),n=i(8),r=i(20);new s.a({store:r.a,el:"#app",render:function(t){return t(n.a)}})},,,,function(t,e,i){"use strict";function s(t){i(9)}var n=i(10),r=i(19),o=i(1),a=s,c=o(n.a,r.a,!1,a,null,null);e.a=c.exports},function(t,e){},function(t,e,i){"use strict";var s=i(0),n=i(11);e.a=s.a.extend({computed:{editing:function(){return this.$store.state.editing},selectedItem:function(){return this.$store.state.items[this.$store.state.selectedIndex]},styleObj:function(){var t=this.selectedItem;return this.selectedItem?{top:t.y+"px",left:t.x+"px",width:t.w+"px",height:t.h+"px"}:{}},editingText:{get:function(){return this.$store.state.editingText},set:function(t){this.$store.commit("updateEditor",t)}}},methods:{editItem:function(){this.$store.commit("editItem",this.editingText)}},components:{FusenCanvas:n.a},watch:{editing:function(t){var e=this;t&&s.a.nextTick(function(){e.$el.querySelector(".editor__textarea").focus()})}}})},function(t,e,i){"use strict";function s(t){i(12)}var n=i(13),r=i(18),o=i(1),a=s,c=o(n.a,r.a,!1,a,null,null);e.a=c.exports},function(t,e){},function(t,e,i){"use strict";function s(t){return 8*Math.round(t/8)}var n=i(0),r=i(14);e.a=n.a.extend({data:function(){return{dragging:"none",resizeType:[],dragOffset:{x:0,y:0}}},computed:{selectedItem:function(){return this.$store.state.items[this.$store.state.selectedIndex]},items:function(){return this.$store.state.items},handles:function(){var t=this.selectedItem;if(!t)return[];return[{type:["left","top"],x:0,y:0,size:10},{type:["center","top"],x:t.w/2,y:0,size:10},{type:["right","top"],x:t.w,y:0,size:10},{type:["left","center"],x:0,y:t.h/2,size:10},{type:["right","center"],x:t.w,y:t.h/2,size:10},{type:["left","bottom"],x:0,y:t.h,size:10},{type:["center","bottom"],x:t.w/2,y:t.h,size:10},{type:["right","bottom"],x:t.w,y:t.h,size:10}]},connectorPath:function(){var t=this.items,e={x:t[0].x+t[0].w,y:t[0].y+t[0].h/2},i={x:t[1].x,y:t[1].y+t[1].h/2};return t.length>0?"M"+e.x+","+e.y+" C"+(e.x+50)+","+e.y+" "+(i.x-50)+","+i.y+" "+i.x+","+i.y:""}},methods:{resizePoint:function(t){this.dragging="resize",this.resizeType=t},startDrag:function(t){var e=t[0],i=t[1];this.dragging="move",this.$store.commit("selectItem",i),this.dragOffset.x=e.offsetX-this.selectedItem.x,this.dragOffset.y=e.offsetY-this.selectedItem.y},onResize:function(t){var e={x:this.selectedItem.x,y:this.selectedItem.y,w:this.selectedItem.w,h:this.selectedItem.h};"left"===this.resizeType[0]&&(e.x=s(t.offsetX),e.w=e.w-e.x+this.selectedItem.x),"right"===this.resizeType[0]&&(e.w=s(t.offsetX-this.selectedItem.x)),"bottom"===this.resizeType[1]&&(e.h=s(t.offsetY-this.selectedItem.y)),"top"===this.resizeType[1]&&(e.y=s(t.offsetY),e.h=e.h-e.y+this.selectedItem.y),this.$store.commit("resizeItem",e)},onDrag:function(t){"move"===this.dragging&&this.$store.commit("moveItem",{x:s(t.offsetX-this.dragOffset.x),y:s(t.offsetY-this.dragOffset.y)}),"resize"===this.dragging&&this.onResize(t)},stopDrag:function(){"none"!==this.dragging&&(this.dragging="none")},openEditor:function(t){this.$store.commit("openEditor",t)}},components:{FusenGroup:r.a}})},function(t,e,i){"use strict";function s(t){i(15)}var n=i(16),r=i(17),o=i(1),a=s,c=o(n.a,r.a,!1,a,null,null);e.a=c.exports},function(t,e){},function(t,e,i){"use strict";var s=i(0);e.a=s.a.extend({props:{item:Object,index:Number},methods:{startDrag:function(t){this.$emit("selected",[t,this.index])},openEditor:function(){this.$emit("open",this.index)}},computed:{toPosition:function(){return"translate("+this.item.x+", "+this.item.y+")"}}})},function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("g",{attrs:{transform:t.toPosition}},[i("rect",{staticClass:"item",attrs:{width:t.item.w,height:t.item.h,filter:"url(#drop-shadow)"},on:{pointerdown:function(e){t.startDrag(e)},dblclick:t.openEditor}}),t._v(" "),i("foreignObject",{attrs:{width:"300",height:"300",x:"0",y:"0"}},[i("div",{staticClass:"innerText",domProps:{textContent:t._s(t.item.text)}})])],1)},n=[],r={render:s,staticRenderFns:n};e.a=r},function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{attrs:{id:"canv",width:"800",height:"800"},on:{pointermove:t.onDrag,pointerup:t.stopDrag}},[i("filter",{attrs:{id:"drop-shadow",width:"150%",height:"150%"}},[i("feGaussianBlur",{attrs:{in:"SourceAlpha",result:"blur",stdDeviation:"2"}}),t._v(" "),i("feOffset",{attrs:{result:"offsetBlur",dx:"2",dy:"2"}}),t._v(" "),i("feBlend",{attrs:{in:"SourceGraphic",in2:"offsetBlur",mode:"normal"}})],1),t._v(" "),t._l(t.items,function(e,s){return i("fusen-group",{key:s,attrs:{index:s,item:e},on:{selected:t.startDrag,open:t.openEditor}})}),t._v(" "),t.selectedItem?i("g",{attrs:{transform:"translate("+t.selectedItem.x+","+t.selectedItem.y+")"}},[i("rect",{staticClass:"selection",attrs:{x:0,y:0,width:t.selectedItem.w,height:t.selectedItem.h}}),t._v(" "),t._l(t.handles,function(e,s){return i("rect",{key:s,staticClass:"handle",attrs:{x:e.x-e.size/2,y:e.y-e.size/2,width:e.size,height:e.size},on:{pointerdown:function(i){t.resizePoint(e.type)}}})})],2):t._e(),t._v(" "),i("path",{staticClass:"connector",attrs:{d:t.connectorPath}})],2)},n=[],r={render:s,staticRenderFns:n};e.a=r},function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("link",{attrs:{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0-beta/css/bootstrap-reboot.css"}}),t._v(" "),i("fusen-canvas"),t._v(" "),t.editing?i("div",{staticClass:"editor"},[i("div",{staticClass:"editor__frame",style:t.styleObj},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.editingText,expression:"editingText"}],staticClass:"editor__textarea",attrs:{autofocus:""},domProps:{value:t.editingText},on:{blur:t.editItem,input:function(e){e.target.composing||(t.editingText=e.target.value)}}})])]):t._e()],1)},n=[],r={render:s,staticRenderFns:n};e.a=r},function(t,e,i){"use strict";var s=i(0),n=i(21);s.a.use(n.a),e.a=new n.a.Store({state:{selectedIndex:-1,editingText:"",items:[{x:10,y:10,w:200,h:100,text:"Hello\nWorld"},{x:210,y:210,w:300,h:150,text:"はろー"}],editing:!1},mutations:{moveItem:function(t,e){t.items[t.selectedIndex].x=e.x,t.items[t.selectedIndex].y=e.y},resizeItem:function(t,e){t.items[t.selectedIndex].x=e.x,t.items[t.selectedIndex].y=e.y,t.items[t.selectedIndex].w=e.w,t.items[t.selectedIndex].h=e.h},selectItem:function(t,e){t.selectedIndex=e},openEditor:function(t,e){t.editing=!0,t.selectedIndex=e,t.editingText=t.items[e].text},editItem:function(t,e){t.items[t.selectedIndex].text=e,t.editingText="",t.editing=!1},updateEditor:function(t,e){t.editingText=e}}})}],[3]);
//# sourceMappingURL=client.c35e3c27.js.map